<ion-content [fullscreen]="true" class="main-bg">
  
  <div class="header-curve">
    <div class="header-top">
      <div class="titles fade-in-element">
        <span class="subtitle">Vista Aérea</span>
        <h1>Control de Zonas</h1>
      </div>
      <div class="filter-btn fade-in-element">
        <ion-icon name="options"></ion-icon>
      </div>
    </div>
  </div>

  <div class="digital-map-container slide-up-1" (click)="selectedLamp = null"> 
    
    <div class="street-horizontal"></div>
    <div class="street-vertical"></div>

    <div *ngFor="let lamp of lamps" 
         class="map-pin {{lamp.status}}" 
         [style.left.%]="lamp.x" 
         [style.top.%]="lamp.y"
         (click)="toggleInfo(lamp); $event.stopPropagation()">
      
      <div class="pulse" *ngIf="lamp.status !== 'inactive'"></div>

      <div class="info-bubble" *ngIf="selectedLamp === lamp">
        <strong>{{lamp.name}}</strong>
        <span>{{lamp.power}}</span>
        <span class="status-text {{lamp.status}}">
          {{ lamp.status === 'active' ? 'ON' : (lamp.status === 'warning' ? 'ERR' : 'OFF') }}
        </span>
      </div>
    </div>

    <div class="map-label">
      <ion-icon name="wifi"></ion-icon> En línea
    </div>
  </div>

  <div class="zone-summary slide-up-2">
    <div class="summary-card">
      <span class="label">Luminarias</span>
      <span class="value">45</span>
    </div>
    <div class="summary-divider"></div>
    <div class="summary-card">
      <span class="label">Consumo</span>
      <span class="value">42.5 <small>kWh</small></span>
    </div>
    <div class="summary-divider"></div>
    <div class="summary-card">
      <span class="label">Zona</span>
      <span class="value">Norte</span>
    </div>
  </div>

  <div class="section-header slide-up-3">
    <h3>Listado Manual</h3>
    <span class="see-all">Ver todo</span>
  </div>

  <ion-list lines="none" class="lamp-list slide-up-3">
    
    <ion-item class="ripple-effect">
      <div class="lamp-icon-box"><ion-icon name="bulb"></ion-icon></div>
      <ion-label>
        <h2>Lámpara N-101</h2>
        <p>Calle Reforma • LED</p>
      </ion-label>
      <div class="status-section" slot="end">
        <span class="consumption">0.8 kWh</span>
        <ion-toggle checked="true" mode="ios" color="success"></ion-toggle>
      </div>
    </ion-item>

    <ion-item class="ripple-effect">
      <div class="lamp-icon-box warning"><ion-icon name="alert-circle"></ion-icon></div>
      <ion-label>
        <h2>Lámpara N-103</h2>
        <p>Av. Principal • Sodio</p>
      </ion-label>
      <div class="status-section" slot="end">
        <span class="consumption high">1.2 kWh</span>
        <ion-toggle checked="true" mode="ios" color="danger"></ion-toggle>
      </div>
    </ion-item>

    <ion-item class="ripple-effect">
      <div class="lamp-icon-box off"><ion-icon name="bulb-outline"></ion-icon></div>
      <ion-label>
        <h2 class="text-off">Lámpara N-104</h2>
        <p>Parque Central • LED</p>
      </ion-label>
      <div class="status-section" slot="end">
        <span class="consumption off">--</span>
        <ion-toggle checked="false" mode="ios"></ion-toggle>
      </div>
    </ion-item>

  </ion-list>

</ion-content>